# ════════════════════════════════════════════════════════════════
# AGENT CLASH ARENA — Environment Variables
# Copy this file to .env and fill in the values
# ════════════════════════════════════════════════════════════════

# ── Server Config ─────────────────────────────────────────────
PORT=3001
NODE_ENV=development
# Frontend URL (for CORS in production)
FRONTEND_URL=http://localhost:5173

# ── API URL (used by frontend to reach backend) ──────────────
# Development: http://localhost:3001/api/v1
# Production:  /api/v1 (same-origin, served by Express)
VITE_API_URL=http://localhost:3001/api/v1

# ── Database ──────────────────────────────────────────────────
# If set, MongoDB is used. If empty, falls back to JSON file DB.
# MongoDB Atlas: mongodb+srv://user:pass@cluster.mongodb.net/agentclash
# Local: mongodb://localhost:27017/agentclash
MONGODB_URI=

# ── Circle Programmable Wallets (Web3 Services) ──────────────
# Get from: https://console.circle.com/
# 1. Create a project → get App ID
# 2. Create API Key (server-side) from Settings
VITE_CIRCLE_APP_ID=your_circle_app_id
CIRCLE_API_KEY=your_circle_api_key_server_side
CIRCLE_API_URL=https://api.circle.com

# ── Privy Auth ───────────────────────────────────────────────
# Get from: https://dashboard.privy.io/
# 1. Create a Privy app
# 2. Copy the App ID
VITE_PRIVY_APP_ID=your_privy_app_id

# ── Google Auth (legacy) ─────────────────────────────────────
VITE_GOOGLE_CLIENT_ID=

# ── Monad Mainnet ─────────────────────────────────────────────
# Chain ID: 143 (0x8F)
# Explorer: https://monadscan.com
# Frontend build-time RPC (wallet UI)
VITE_MONAD_RPC_URL=https://rpc.monad.xyz
# Backend runtime RPC (on-chain match operations)
MONAD_RPC_URL=https://rpc.monad.xyz
MONAD_CHAIN_ID=143

# ── Smart Contract (On-chain Betting) ────────────────────────
# Deploy contract first, then paste the address here
# Deploy instructions: See contracts/deploy.js
VITE_BETTING_CONTRACT_ADDRESS=
# Private key of the backend operator wallet (for creating/resolving matches)
DEPLOYER_PRIVATE_KEY=
OPERATOR_PRIVATE_KEY=
OPERATOR_ADDRESS=
ONCHAIN_BETTING_REQUIRED=true
CHAIN_TX_SEND_TIMEOUT_MS=30000
CHAIN_TX_WAIT_TIMEOUT_MS=180000

# ── Error Monitoring (Sentry) ────────────────────────────────
# Get from: https://sentry.io/
# Create a project → copy DSN
SENTRY_DSN=
VITE_SENTRY_DSN=

# Economy split (must sum to 100)
BETTORS_PCT=75
WINNER_AGENT_PCT=15
PLATFORM_FEE_PCT=10

# CLASH buyback + burn (Nad.fun)
BUYBACK_ENABLED=false
CLASH_TOKEN_ADDRESS=0x6e3E3931420fA841a3943b32D13e6d63Fe047777
# Nad.fun Lens contract (Monad mainnet)
NAD_LENS_ADDRESS=0x16c92fF54fAE4EA4207F438fB154764b5DF2D1b1
# If empty, falls back to DEPLOYER_PRIVATE_KEY / OPERATOR_PRIVATE_KEY
BUYBACK_SIGNER_PRIVATE_KEY=
# Scheduler and sizing
BUYBACK_INTERVAL_MS=1800000
BUYBACK_MIN_PLATFORM_FEES_MON=3
BUYBACK_MIN_SPEND_MON=1
BUYBACK_MAX_SPEND_MON=100
BUYBACK_SPEND_BPS=6000
BUYBACK_GAS_RESERVE_MON=0.05
BUYBACK_SLIPPAGE_BPS=300
BUYBACK_DEADLINE_SECONDS=300
# 10000 = burn all bought CLASH
BUYBACK_BURN_BPS=10000
BUYBACK_BURN_ADDRESS=0x000000000000000000000000000000000000dEaD

# Match pool gating (live arena)
# Betting opens for 2 minutes by default. Match starts only when pool >= MATCH_MIN_POOL_MON.
# If threshold is not reached, betting window is extended by MATCH_POOL_EXTENSION_MS.
MATCH_MIN_POOL_MON=100
MATCH_BETTING_DURATION_MS=120000
MATCH_POOL_EXTENSION_MS=120000
MATCH_WAITING_RETRY_MS=10000
MATCH_POOL_READY_DELAY_MS=2000

# Telegram bot onboarding
TELEGRAM_BOT_TOKEN=
TELEGRAM_WEBHOOK_SECRET=
TELEGRAM_BOT_USERNAME=

# Agent wallet security
# 32-byte key (hex with 64 chars or base64). Required for encrypted agent wallet keys.
AGENT_WALLET_ENCRYPTION_KEY=

# Shop payment flow (Telegram + on-chain MON transfer)
SHOP_TREASURY_ADDRESS=
SHOP_ORDER_TTL_MINUTES=30
MONAD_EXPLORER_TX_BASE=https://monadscan.com/tx/
# Extra MON reserve required on agent wallet for gas when auto-paying from agent wallet
AGENT_PAYMENT_GAS_RESERVE_MON=0.005

# Security hardening
# In production, set at least one allowed frontend origin (comma separated supported)
ALLOWED_ORIGINS=https://www.agentclasharena.xyz,https://agentclasharena.xyz

# Protect admin-only endpoints (e.g. POST /api/v1/arena/tournament/start)
ADMIN_API_KEY=
